function MSIstruct = MIMSsummary

%  dataset_info: cell which contains relevent informations from MIMS experiments
%     COL1: 
%     COL2: rotation "label" indicating how data need to be rotated s.t.
%       the anatomical left is on the the viewer's left and anatomy are
%       oriented dorsal on top to ventral on bottom (that is NoEaSoWe =>
%       Dorsal, Right, Ventral, Left)
%       -2    Original data aquired VRDL, flip columns up/down (or flip LR
%             then rotate twice)
%       -1    Original data aquired RVLD, rotate 90 deg clockwise
%        0    Original data aquired LDRV, rotate 90 deg ccw
%        1    Original data aquired LDRV, rotate 90 deg ccw
%        2    Original data aquired VLDR, rotate 180 deg
%  Date           Author            E-mail                      Version
%  24 July 2015   Amanda Balderrama amanda.gaudreau@gmail.com     0
%  24 Feb  2017   Amanda Balderrama amanda.gaudreau@gmail.com     1




cdir = loaddirfun;
cd(cdir.lafldr)
dfiles = cellstr(ls);
dataset_info = { % (1) dataset name, (2) rotation Tag, (3) spot size, (4) scan speed, (5) l2ldist
  '20150312_MIMS5_iTBI',    -1, 20, 40, 20;...
  '20150314_MIMS5_iTBI',    -1, 20, 20, 20;...
  '20150316_MIMS7_sham',    -1, 20, 40, 20;...
  '20150320_MIMS6_iTBI',    -1, 20, 40, 20;...
  '20150322_MIMS6_iTBI_eye',-1, '', '', '';...
  '20150324_MIMS12_sham',   -1, 20, 40, 20;...
  '20150325_MIMS13_iTBI',   +1, 20, 40, 20;...
  '20150327_MIMS9_sham',    +1, 20, 40, 20;...
  '20150329_MIMS9_sham',    +1, 20, 40, 20;...
  '20150330_MIMS11_sham',   +1, 20, 40, 20;...
  '20150403_MIMS15_iTBI',   -1, 20, 40, 20;...
  '20150405_MIMS15_iTBI',   -1, 20, 40, 20;...
  '20150407_MIMS21_sham',   -1, 20, 40, 20;...
  '20150408_MIMS21_sham',   -1, 20, 40, 20;...
  '20150413_MIMS35_control',+1, 20, 40, 20;...
  '20150414_MIMS32_iTBI',   -1, 20, 40, 20;...
  '20150415_MIMS27_iTBI',   +1, 20, 40, 20;...
  '20150605_ALON3_iTBI',    -1, 20, 40, 5;...
  '20150608_ALON5_sham',    -1, 20, 40, 5;...
  '20150616_ALON4comb_iTBI',0, 20, 40, 20;...
  '20150617_ALON6_sham',    0, 20, 40, 20;...
  '20150618_ALON8_iTBI',    0, 20, 40, 20;...
  '20150619_ALON11_sham',   0, 20, 40, 20;...,...'',...'',...
  '20150619_ALON11comb_sham',0, 20, 40, 20;...,...'',...'',...
  '20150622_ALON9_iTBI',    0, 20, 40, 20;...
  '20150623_ALON12_sham',    0, 20, 40, 20;...
  '20150626_ALON10_iTBI',   0, 20, 40, 20;... 
  '20150627_ALON13_sham',   0, 20, 40, 20;... 
  '20150707_ALON8_iTBI',   0, 20, 40, 20;... 
  '20150708_ALON9_iTBI',   0, 20, 40, 20;... 
  '20150708_ALON11_sham',   0, 20, 40, 20;... 
  '20150709_ALON12_sham',   0, 20, 40, 20;... 
  '20150709_ALON13_sham',   0, 20, 40, 20;... 
  '20150710_ALON12_sham',   0, 20, 40, 20;... 
  '20150711_ALON10_iTBI',   0, 20, 40, 20;... '20150712_ALON9_iTBI',    -2, 20, 40, 20;... 
  '20150713_ALON12_sham',   +2, 20, 40, 20;... 
  '20150714_ALON10_iTBI',   -2, 20, 40, 20;... 
  '20150715_ALON13_sham',   +2, 20, 40, 20;... 
  '20150716_ALON10_iTBI',   0, 20, 40, 20;... 
  '20150805_ALON12_sham',   +2, 10, 40, 10;... 
  '20150807_ALON10_iTBI',   -2, 10, 40, 20;... 
  '20150810_F058',          +1, 20, 40, 20;...
  '20150811_ALON10_iTBI',   -2, 4, 12, 4;... 
  '20150818_MIMS4_iTBI',   0, 20, 60, 30;... 
  '20150818_MIMS14_iTBI',   0, 20, 60, 30;... 
  '20150818_MIMS22_sham',   0, 20, 60, 30;... 
  '20150819_MIMS26_iTBI',   0, 20, 60, 20;... 
  '20150820_MIMS31_iTBI',   0, 20, 60, 20;... 
  '20150820_MIMS34_sham',   0, 20, 60, 20;... 
  '20150821_MIMS1_iTBI',   0, 20, 60, 20;... 
  '20150821_MIMS2_iTBI',   0, 20, 60, 20;... 
  '20150821_MIMS3_iTBI',   0, 20, 60, 20;... 
  '20150821_MIMS8_sham',   0, 20, 60, 20;... 
  '20150821_MIMS10_sham',   0, 20, 60, 20;... 
  '20150821_MIMS33_sham',   +2, 20, 60, 20;... 
  '20150824_MIMS14_iTBI',   0, 20, 60, 20;... 
  '20150824_MIMS18_iTBI',   0, 20, 60, 20;... 
  '20150824_MIMS20_sham',   +2, 20, 60, 20;... 
  '20150824_MIMS24_sham',   0, 20, 60, 20;...
  '20150824_MIMS25_iTBI',   0, 20, 60, 20;...
  '20150824_MIMS28_iTBI',   0, 20, 60, 20;...
  '20150827_MIMS23_ctrl',   0, 20, 60, 20;...
  '20150827_MIMS29_ctrl',   0, 20, 60, 20;...
  '20150909_ALON3_iTBI',    0, 4, 4, 4;...
  '20150909_ALON4_iTBI',    0, 4, 4, 4;...
  '20150909_ALON8_iTBI',    0, 4, 4, 4;...
  '20150909_ALON9_iTBI',    0, 4, 4, 4;...
  '20150909_ALON13_sham',   0, 4, 4, 4;...
  '20150918_LacSacAll',     0, 50, 50, 50;...
  '20150921_LacSacAll',     0, 50, 50, 50;...
  '20150922_LacSacAll',     0, 50, 50, 50;...
  '20150918_LacSac4554',    0, 50, 50, 50;...
  '20150918_LacSac3733',    0, 50, 50, 50;...
  '20150918_LacSac5257',    0, 50, 50, 50;...
  '20150918_LacSac14391',   0, 50, 50, 50;...
  '20150918_LacSac4324',    0, 50, 50, 50;...
  '20150921_LacSac4324',    0, 50, 50, 50;...
  '20150921_LacSac5257',    0, 50, 50, 50;...
  '20150921_LacSac1581',    0, 50, 50, 50;...Mt
  '20150921_LacSac3733',    0, 50, 50, 50;...
  '20150922_LacSacA',       0, 50, 50, 50;...
  '20150922_LacSacBleft',   0, 50, 50, 50;...
  '20150922_LacSacBright',  0, 50, 50, 50;...
  '20150923_MIMS30_iTBI',   0, 20, 60, 20;...
  '20151023_MMMseq',         0, 20, 60, 20;...
  '20151026_MMMseq',         0, 20, 60, 20;...
  '20151102_MMMseq',         0, 20, 60, 20;...
  '20151104_MMMseq',         0, 20, 60, 20;...
  };
nstr = length(dataset_info);
ndfiles = length(dfiles);
dfilesindx = cellfun(@(x) strmatch(x,dfiles,'exact'),dataset_info(:,1),'uniformoutput',0)';
efiles = cellfun(@(x) ~isempty(x),dfilesindx);
dfilesvec = zeros(1,length(dfilesindx));
dfilesvec(efiles) = cell2mat(dfilesindx(efiles));
fileindx = 1:length(dfilesindx);
%dfilesindx = cellfun(@(x) strmatch(x,dfiles,'exact'),dataset_str,'uniformoutput',0);
%ldf = cellfun(@(x) length(x),dfilesindx);
%tst = cellfun(@(x) cellfun(@(y) ~isempty(y),strfind(dfiles,x)),dataset_str,'uniformoutput',0);
%tst = cell2mat(tst);%.*repmat(1:nstr,ndfiles,1);
%dfilesindx = nan(1,nstr);
%for f = 1:nstr
%  dfilesindx(f) = find(tst(:,f));
%end
rotvec = cell2mat(dataset_info(:,2))';

MSIstruct.dsetInfo = dataset_info;
MSIstruct.dfilesindx = dfilesvec;
MSIstruct.rotvec = rotvec;
MSIstruct.dspotCOL = 3;
MSIstruct.vscanCOL = 4;
MSIstruct.dl2lCOL = 5;
end